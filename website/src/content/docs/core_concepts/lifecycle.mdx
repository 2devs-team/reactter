---
title: Lifecycle
description: The lifecycle of a component in React.
sidebar:
  order: 5
---
import { HE, HM, HT } from '@/components/Highlight/index.ts';
import NoteLifeExample from '@/content/docs/shareds/note_lifecycle_example.mdx';

In Reactter, both the states and the dependency (managed by the [dependency injection](/reactter/core_concepts/dependency_injection)) contain different stages,
also known as <HT><a href="https://pub.dev/documentation/reactter/latest/reactter/Lifecycle.html" target="_blank">`Lifecycle`</a></HT>.
The lifecycle entails events emitted through the [event handler](/reactter/core_concepts/event_handler).

Let's explore the lifecycle events:

- <HE>`Lifecycle.registered`</HE>: is triggered when the dependency has been registered.
- <HE>`Lifecycle.unregistered`</HE>: is triggered when the dependency is no longer registered.
- <HE>`Lifecycle.initialized`</HE>: is triggered when the dependency has been initialized.
- <HE>`Lifecycle.willMount`</HE> (exclusive of _**flutter_reactter**_ package): is triggered when the dependency is going to be mounted in the widget tree.
- <HE>`Lifecycle.didMount`</HE> (exclusive of _**flutter_reactter**_ package): is triggered after the dependency has been successfully mounted in the widget tree.
- <HE>`Lifecycle.willUpdate`</HE>: is triggered anytime the state or the dependency is about to be updated. The event parameter is a <HT>`ReactterState`</HT>.
- <HE>`Lifecycle.didUpdate`</HE>: is triggered anytime the state or the dependency has been updated. The event parameter is a <HT>`ReactterState`</HT>.
- <HE>`Lifecycle.willUnmount`</HE>(exclusive of _**flutter_reactter**_ package): is triggered when the dependency is about to be unmounted from the widget tree.
- <HE>`Lifecycle.didUnmount`</HE>(exclusive of _**flutter_reactter**_ package): is triggered when  the dependency has been successfully unmounted from the widget tree.
- <HE>`Lifecycle.destroyed`</HE>: is triggered when the dependency has been destroyed.

## Using Event Handler

You can listen to the lifecycle events of a dependency by using <HM>`Reactter.on`</HM> or <HM>`Reactter.one`</HM> method of the event handler. e.g:

<NoteLifeExample />

```dart title="counter_controller.dart" "Reactter.on" "Lifecycle.willMount" "Lifecycle.didMount" "Lifecycle.willUpdate" "Lifecycle.didUpdate" "Lifecycle.willUnmount" "Lifecycle.didUnmount"
import 'package:reactter/reactter.dart';

class CounterController extends Reactter {
  final count = Signal(0);

  counter() {
    Reactter.on(this, Lifecycle.willMount, (_, __) {
      print('Counter will mount');
    });

    Reactter.on(this, Lifecycle.didMount, (_, __) {
      print('Counter mounted');
    });

    Reactter.on(this, Lifecycle.willUpdate, (_, state) {
      print('Counter will update by $state');
    });

    Reactter.on(this, Lifecycle.didUpdate, (_, state) {
      print('Counter did update by $state');
    });

    Reactter.on(this, Lifecycle.willUnmount, (_, __) {
      print('Counter will unmount');
    });

    Reactter.on(this, Lifecycle.didUnmount, (_, __) {
      print('Counter did unmount');
    });
  }

  void increment() {
    count.value++;
  }

  void decrement() {
    count.value--;
  }
}
```

```dart title="counter_app.dart" collapse={1-100} /CounterController(?!\u0060)(?!Page)/ "CounterController()" /counter(?!\\.dart)/ "counter.increment" "counter.decrement" "counter.count" "ReactterProvider" "ReactterConsumer"
import 'package:flutter/material.dart';
import 'package:flutter_reactter/flutter_reactter.dart';
import 'counter_controller.dart';

class CounterPage extends StatelessWidget {
  const CounterPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return ReactterProvider<CounterController>(
      () => CounterController(),
      builder: (context, counter, child) {
        return Scaffold(
          appBar: AppBar(
            title: const Text("Counter"),
          ),
          body: Row(
            children: [
              ElevatedButton(
                onPressed: counter.decrement,
                child: Icon(Icons.remove),
              ),
              Padding(
                padding: const EdgeInsets.all(8.0),
                child: ReactterConsumer<CounterController>(
                  listenStates: (counter) => [counter.count],
                  builder: (context, counter, child) {
                    return Text("${counter.count}");
                  },
                ),
              ),
              ElevatedButton(
                onPressed: counter.increment,
                child: Icon(Icons.add),
              ),
            ],
          ),
        );
      },
    );
  }
}
```

```dart title="main.dart" "Reactter.on" "ReactterDependency" "Lifecycle.unregistered" "Lifecycle.registered" "Lifecycle.initialized" "Lifecycle.destroyed" /(Counter)\\>/
import 'package:flutter/material.dart';
import 'package:reactter/reactter.dart';
import 'counter_app.dart';
import 'counter.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    Reactter.on(
      ReactterDependency<CounterController>(),
      Lifecycle.unregistered,
      (_, __) => print('Counter unregistered'),
    );

    Reactter.on(
      ReactterDependency<CounterController>(),
      Lifecycle.registered,
      (_, __) => print('Counter registered'),
    );

    Reactter.on(
      ReactterDependency<CounterController>(),
      Lifecycle.initialized,
      (_, __) => print('Counter initialized'),
    );

    Reactter.one(
      ReactterDependency<CounterController>(),
      Lifecycle.destroyed,
      (_, __) => print('Counter destroyed'),
    );

    return MaterialApp(
      home: CounterControllerApp(),
    );
  }
}
```

:::note
  The <HT>`ReactterDependency`</HT> is a generic class that takes the type of the dependency and optionally pass an `id`.
  This class is used to identify the dependency in the event handler.
  It ideal to use the <HT>`ReactterDependency`</HT> class when the dependency is not initialize yet.
:::

## Using LifecycleObserver

Extend your instances with <HT><a href="https://pub.dev/documentation/reactter/latest/reactter/LifecycleObserver-class.html" target="_blank">`LifecycleObserver`</a></HT>
and use its methods to observe the lifecycle events. e.g:

<NoteLifeExample />

```dart title="counter_controller.dart" "LifecycleObserver" "onInitialized" "onDidMount" "onWillMount" "onWillUpdate" "onDidUpdate" "onWillUnmount" "onDidUnmount"
import 'package:reactter/reactter.dart';

class CounterController extends LifecycleObserver  {
  final count = Signal(0);

  void onInitialized() {
    print('Counter initialized');
  }

  void onDidMount() {
    print('Counter mounted');
  }

  void onWillMount() {
    print('Counter will mount');
  }

  void onWillUpdate(ReactterState state) {
    print('Counter will update by $state');
  }

  void onDidUpdate(ReactterState state) {
    print('Counter did update by $state');
  }

  void onWillUnmount() {
    print('Counter will unmount');
  }

  void onDidUnmount() {
    print('Counter did unmount');
  }

  void increment() {
    count.value++;
  }

  void decrement() {
    count.value--;
  }
}
```

```dart title="counter_app.dart"  collapse={1-100} /CounterController(?!\u0060)(?!Page)/ "CounterController()" /counter(?!\\.dart)/ "counter.increment" "counter.decrement" "counter.count" "ReactterProvider" "ReactterConsumer"
import 'package:flutter/material.dart';
import 'package:flutter_reactter/flutter_reactter.dart';
import 'counter_controller.dart';

class CounterPage extends StatelessWidget {
  const CounterPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return ReactterProvider<CounterController>(
      () => CounterController(),
      builder: (context, counter, child) {
        return Scaffold(
          appBar: AppBar(
            title: const Text("Counter"),
          ),
          body: Row(
            children: [
              ElevatedButton(
                onPressed: counter.decrement,
                child: Icon(Icons.remove),
              ),
              Padding(
                padding: const EdgeInsets.all(8.0),
                child: ReactterConsumer<CounterController>(
                  listenStates: (counter) => [counter.count],
                  builder: (context, counter, child) {
                    return Text("${counter.count}");
                  },
                ),
              ),
              ElevatedButton(
                onPressed: counter.increment,
                child: Icon(Icons.add),
              ),
            ],
          ),
        );
      },
    );
  }
}
```

```dart title="main.dart"  collapse={1-100}
import 'package:flutter/material.dart';
import 'counter_app.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: CounterApp(),
    );
  }
}
```

## Using UseEffect

The <HT>`UseEffect`</HT> hook can be used to listen to the lifecycle events of a dependency. e.g:

<NoteLifeExample />

```dart title="counter.dart" "UseEffect" /(count)(?!\u0060)/
import 'package:reactter/reactter.dart';

class Counter extends Reactter {
  final count = Signal(0);

  const Counter() {
    UseEffect(() {
      print('Counter mounted(`Lifecycle.didMount`)');

      return () {
        print('Counter will unmount(`Lifecycle.willUnmount`)');
      };
    }, []);
  }

  void increment() {
    count.value++;
  }

  void decrement() {
    count.value--;
  }
}
```

```dart title="counter_app.dart"  collapse={1-100} /CounterController(?!\u0060)(?!Page)/ "CounterController()" /counter(?!\\.dart)/ "counter.increment" "counter.decrement" "counter.count" "ReactterProvider" "ReactterConsumer"
import 'package:flutter/material.dart';
import 'package:flutter_reactter/flutter_reactter.dart';
import 'counter_controller.dart';

class CounterPage extends StatelessWidget {
  const CounterPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return ReactterProvider<CounterController>(
      () => CounterController(),
      builder: (context, counter, child) {
        return Scaffold(
          appBar: AppBar(
            title: const Text("Counter"),
          ),
          body: Row(
            children: [
              ElevatedButton(
                onPressed: counter.decrement,
                child: Icon(Icons.remove),
              ),
              Padding(
                padding: const EdgeInsets.all(8.0),
                child: ReactterConsumer<CounterController>(
                  listenStates: (counter) => [counter.count],
                  builder: (context, counter, child) {
                    return Text("${counter.count}");
                  },
                ),
              ),
              ElevatedButton(
                onPressed: counter.increment,
                child: Icon(Icons.add),
              ),
            ],
          ),
        );
      },
    );
  }
}
```

```dart title="main.dart"  collapse={1-100}
import 'package:flutter/material.dart';
import 'counter_app.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: CounterApp(),
    );
  }
}
```